<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"></meta>
    <title>上课下课铃</title>
    <script src="js/cookies.js"></script>
    <script>
        var video;
        var text
        var al
        var d1
        function init()
        {
            video = document.getElementById("video1");
            initTime()
            video.volume=0.07;
            SetAlarms()

        }
        function SetAlarms() {
            var d=new Date()


            al=getCookie("alarms")
            if(al==null){
                createCookie("alarms","19 55;20 40",300)
                createCookie("L_alarms","21 20",300)
                al=getCookie("alarms")
            }
            var als=al.split(";")
            for(i=0;i<als.length;i++){
                var h=Number( als[i].split(" ")[0])
                var m=Number( als[i].split(" ")[1])
                console.log('='+h+'  '+m)
                d1=new Date()
                d1.setSeconds(0)
                d1.setHours(h)
                d1.setMinutes(m)
                console.log(d1);
                if(d1-d>0){
                    setTimeout("PlaySound()",d1-d)
                    console.log(h+'  '+m)
                    console.log(d1)
                }
            }
            al=getCookie("L_alarms")
            if(al!=null){
                var als=al.split(";")
                for(i=0;i<als.length;i++){
                    var h=Number( als[i].split(" ")[0])
                    var m=Number( als[i].split(" ")[1])
                    console.log('='+h+'  '+m)
                    d1=new Date()
                    d1.setSeconds(0)
                    d1.setHours(h)
                    d1.setMinutes(m)
                    console.log(d1);
                    if(d1-d>0){
                        setTimeout("PlayLongSound()",d1-d)
                        console.log("long alarm "+h+'  '+m)
                     console.log(d1)
                    }
                }
            }
        }
        function PlaySound() {
            play()
            setTimeout("video.currentTime=0",30000)
        }
        function PlayLongSound() {
            video.setAttribute("src","media/long_alarm.mp3")
            play()
            setTimeout("video.currentTime=0;video.setAttribute(\"src\",\"media/laxh.mp3\")",300000)
        }
        function play()
        {
            // 播放视频
            video.play();
        }
        function pause()
        {
            //暂停播放
            video.pause();
        }
        //================================
        function initTime() {
            text=document.getElementById('txt1')
            var now=new Date()
            var zk=new Date(1658628000000)
            text.innerText=parseInt((zk-now)/60000)
        }
        function changetime() {

        }
    </script>
</head>
<body onload="init()">
<video id="video1"  src="https://Ray70607.github.io/media/laxh.mp3"  hidden="true">
</video>
<font face="华文彩云" size="8" >
    离中考还有
</font>
<br>
<font face="华文彩云" size="8" id="txt1">

</font>
<font face="华文彩云" size="8" >
    分钟
</font>
</body>
</html>
