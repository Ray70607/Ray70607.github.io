<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Mass & Mole Calculator</title>
  <link rel="stylesheet" href="style.css">
  <script>

    function weightofit(srttar){
      //console.log(srttar)
      var ans_insecondfunction=0
      var elemm='H;1.008;He;4.002602;Li;6.94;Be;9.0121831;B;10.81;C;12.011;N;14.007;O;15.999;F;18.998403163;Ne;20.1797;Na;22.98976928;Mg;24.305;Al;26.9815385;Si;28.085;P;30.973761998;S;32.06;Cl;35.45;Ar;39.948;K;39.0983;Ca;40.078;Sc;44.955908;Ti;47.867;V;50.9415;Cr;51.9961;Mn;54.938044;Fe;55.845;Co;58.933194;Ni;58.6934;Cu;63.546;Zn;65.38;Ga;69.723;Ge;72.630;As;74.921595;Se;78.971;Br;79.904;Kr;83.798;Rb;85.4678;Sr;87.62;Y;88.90584;Zr;91.224;Nb;92.90637;Mo;95.95;Tc;97;Ru;101.07;Rh;102.90550;Pd;106.42;Ag;107.8682;Cd;112.414;In;114.818;Sn;118.710;Sb;121.760;Te;127.60;I;126.90447;Xe;131.293;Cs;132.90545196;Ba;137.327;La;138.90547;Hf;178.49;Ta;180.94788;W;183.84;Re;186.207;Os;190.23;Ir;192.217;Pt;195.084;Au;196.966569;Hg;200.592;Tl;204.38;Pb;207.2;Bi;208.98040;Po;209;At;210;Rn;222;Fr;223;Ra;226;Ac;227;Rf;267;Db;270;Sg;271;Bh;270;Hs;277;Mt;276;Ds;281;Rg;282;Cn;285;Nh;285;Fl;289;Mc;289;Lv;293;Ts;294;Og;294;Ce;140.116;Pr;140.90766;Nd;144.242;Pm;145;Sm;150.36;Eu;151.964;Gd;157.25;Tb;158.92535;Dy;162.500;Ho;164.93033;Er;167.259;Tm;168.93422;Yb;173.054;Lu;174.9668;Th;232.0377;Pa;231.03588;U;238.02891;Np;237;Pu;244;Am;243;Cm;247;Bk;247;Cf;251;Es;252;Fm;257;Md;258;No;259;Lr;262;'.split(';')
      var curenele='';
      var isssrttartele=1;
      // //console.log(srttar)

      for(var i=0;i<srttar.length;i++){

        if(srttar[i]=='('||srttar[i]=='（'){
          var endofit
          for(var j=i;j<srttar.length;j++){
            if(srttar[j]==')'||srttar[j]=='）'){
              endofit=j
              break
            }
            if(j==srttar.length){
              alert('抱歉，此物质不存在')
              return
            }
          }

          var weightofkouhao=weightofit(srttar.substring(i+1,endofit))
          endofit++
          var numofitt=Number(srttar[endofit])
          while (1){
            if(isNaN(srttar[endofit+1])){
              break
            }else{
              endofit++
              numofitt=numofitt*10+Number(srttar[endofit])
            }
          }
          ans_insecondfunction+=weightofkouhao*numofitt

          i=endofit
          continue
        }

        if(isNaN(srttar[i])){
          curenele+=srttar[i]
          //   //console.log(curenele)

          if(i==srttar.length-1)
          {
            var posi=elemm.indexOf(curenele)
            if (posi==-1){
              alert('抱歉，此物质不存在')
              return;
            }
            ans_insecondfunction+=Number(elemm[posi+1])//*Number(srttar[i])
            break
          }
          if(srttar[i+1] >= 'A' && srttar[i+1] <= 'Z'){
            var posi=elemm.indexOf(curenele)
            if (posi==-1){
              alert('抱歉，此物质不存在')
              return;
            }
            ans_insecondfunction+=Number(elemm[posi+1])//*Number(srttar[i])
            //  //console.log(curenele)
            ////console.log(ans_insecondfunction)
            curenele=''
          }


        }else{
          var posi=elemm.indexOf(curenele)
          if (posi==-1){
            alert('抱歉，此物质不存在')
            return;
          }

          var numofitt=Number(srttar[i])
          while (1){
            if(isNaN(srttar[i+1])){
              break
            }else{
              i++
              numofitt=numofitt*10+Number(srttar[i])
            }
          }
          ans_insecondfunction+=Number(elemm[posi+1])*numofitt
          curenele=''
        }
      }





      //console.log(ans_insecondfunction)
      return ans_insecondfunction
      
    }
    
    function calmm(){

      var tar=document.getElementById('inpuu').value
      document.getElementById('inpuu').value=''
      var ans=0
      var elemm='H;1.008;He;4.002602;Li;6.94;Be;9.0121831;B;10.81;C;12.011;N;14.007;O;15.999;F;18.998403163;Ne;20.1797;Na;22.98976928;Mg;24.305;Al;26.9815385;Si;28.085;P;30.973761998;S;32.06;Cl;35.45;Ar;39.948;K;39.0983;Ca;40.078;Sc;44.955908;Ti;47.867;V;50.9415;Cr;51.9961;Mn;54.938044;Fe;55.845;Co;58.933194;Ni;58.6934;Cu;63.546;Zn;65.38;Ga;69.723;Ge;72.630;As;74.921595;Se;78.971;Br;79.904;Kr;83.798;Rb;85.4678;Sr;87.62;Y;88.90584;Zr;91.224;Nb;92.90637;Mo;95.95;Tc;97;Ru;101.07;Rh;102.90550;Pd;106.42;Ag;107.8682;Cd;112.414;In;114.818;Sn;118.710;Sb;121.760;Te;127.60;I;126.90447;Xe;131.293;Cs;132.90545196;Ba;137.327;La;138.90547;Hf;178.49;Ta;180.94788;W;183.84;Re;186.207;Os;190.23;Ir;192.217;Pt;195.084;Au;196.966569;Hg;200.592;Tl;204.38;Pb;207.2;Bi;208.98040;Po;209;At;210;Rn;222;Fr;223;Ra;226;Ac;227;Rf;267;Db;270;Sg;271;Bh;270;Hs;277;Mt;276;Ds;281;Rg;282;Cn;285;Nh;285;Fl;289;Mc;289;Lv;293;Ts;294;Og;294;Ce;140.116;Pr;140.90766;Nd;144.242;Pm;145;Sm;150.36;Eu;151.964;Gd;157.25;Tb;158.92535;Dy;162.500;Ho;164.93033;Er;167.259;Tm;168.93422;Yb;173.054;Lu;174.9668;Th;232.0377;Pa;231.03588;U;238.02891;Np;237;Pu;244;Am;243;Cm;247;Bk;247;Cf;251;Es;252;Fm;257;Md;258;No;259;Lr;262;'.split(';')
      var curenele='';
      var isstartele=1;
     // //console.log(tar)

      for(var i=0;i<tar.length;i++){
        //console.log(i)
        //console.log(ans)
        if(tar[i]=='('||tar[i]=='（'){
          if(curenele) {
            var posi = elemm.indexOf(curenele)
            if (posi == -1) {
              alert('抱歉，此物质不存在')
              return;
            }
            ans += Number(elemm[posi + 1])//*Number(tar[i])
            //  //console.log(curenele)
            ////console.log(ans)
            curenele = ''
          }
          var endofit
          for(var j=i;j<tar.length;j++){
            if(tar[j]==')'||tar[j]=='）'){
              endofit=j
              break
            }
            if(j==tar.length){
              alert('抱歉，此物质不存在')
              return
            }
          }

          var weightofkouhao=weightofit(tar.substring(i+1,endofit))
          endofit++
          var numofitt=Number(tar[endofit])
          while (1){
            if(isNaN(tar[endofit+1])){
              break
            }else{
              endofit++
              numofitt=numofitt*10+Number(tar[endofit])
            }
          }
          ans+=weightofkouhao*numofitt

          i=endofit
          continue
        }

        if(isNaN(tar[i])){
          curenele+=tar[i]
       //   //console.log(curenele)

          if(i==tar.length-1)
          {
            var posi=elemm.indexOf(curenele)
            if (posi==-1){
              alert('抱歉，此物质不存在')
              return;
            }
            ans+=Number(elemm[posi+1])//*Number(tar[i])
            break
          }
          if(tar[i+1] >= 'A' && tar[i+1] <= 'Z'){
            var posi=elemm.indexOf(curenele)
            if (posi==-1){
              alert('抱歉，此物质不存在')
              return;
            }
            ans+=Number(elemm[posi+1])//*Number(tar[i])
          //  //console.log(curenele)
            ////console.log(ans)
            curenele=''
          }


        }else{
          var posi=elemm.indexOf(curenele)
          if (posi==-1){
            alert('抱歉，此物质不存在')
            return;
          }

          var numofitt=Number(tar[i])
          while (1){
            if(isNaN(tar[i+1])){
              break
            }else{
              i++
              numofitt=numofitt*10+Number(tar[i])
            }
          }
          ans+=Number(elemm[posi+1])*numofitt
          curenele=''
        }
      }




      alert("your answer is:"+String(ans.toFixed(2))+"g/mol")

      return
    }

  </script>
</head>
<body>
<!-- partial:index.partial.html -->
<div class="login-box">
  <h2>Molar Mass</h2>
  <form>
    <div class="user-box">
      <input id="inpuu" type="text" name="" required="">
      <label>Substance</label>
    </div>
    <a href="#" onclick="calmm()">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      Calculate
    </a>
  </form>
</div>
<!-- partial -->
  
</body>
</html>
